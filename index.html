<!DOCTYPE HTML>
<html>
<head>
<title>PhysiScript
</title>
<script src="acorn.js"></script>
<script src="interpreter.js"></script>
<style type="text/css" media="screen">
    #textarea { 
        position: relative;
          
   float: right;
   width: 40%;
   height: 50%;
    }
    </style>
<script src="blockly/blockly_compressed.js"></script>
<script src="blockly/blocks_compressed.js"></script>
<script src="blockly/msg/js/en.js"></script>
<script src="blockly/javascript_compressed.js"></script>
<script src="jquery.js"></script>
<link href="bootstrap-tour/build/css/bootstrap-tour-standalone.min.css" rel="stylesheet"/>
<script src="bootstrap-tour/build/js/bootstrap-tour-standalone.min.js"></script>
<script src="Physi.js"></script>
<link rel="stylesheet" href="codemirror/lib/codemirror.css">
<script src="codemirror/lib/codemirror.js"></script>
</head>
<body>
    <h1>PhysiScript</h1>
    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
    <canvas id="artboard"></canvas>
    <xml id="toolbox" style="display: none">
    <category name="HTML5 Canvas API">
        <block type="getcanvas"></block>
        <block type="getcontext"></block>
        <block type="ctxfillstyle"></block>
        <block type="ctxfillrect"></block>
    </category>
   <category name="Variables" id="VarBlocks" custom="VARIABLE"></category>
   <category name="Procedures" custom="PROCEDURE"></category>
   <category name="Math">
       <block type="math_number">
           
       </block>
   </category>
    <category name="Logic">
        <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_boolean"></block>
      <block type="logic_ternary"></block>
    </category>
    <category name="Colors" colour="20">
        <block type="colour_picker"></block>
        <block type="colour_random"></block>
        <block type="colour_rgb"></block>
        <block type="colour_blend"></block>
    </category>
    <category name="Text">
        <block type="text"></block>
         <block type="text_print"></block>
    </category>
 <category name="Lists">
     <block type="lists_create_empty"></block>
     <block type="lists_create_with"></block>
     <block type="lists_repeat"><value type="NUM"><shadow type="text"></shadow></value></block>
     <block type="lists_length"></block>
     <block type="lists_isEmpty"></block>
         
     </category>
  
  
 <category name="Controls">
     <block type="controls_if_else"></block>
 </category>
</xml>
<button id="Run">Run Code</button>
<textarea id="textarea"></textarea>

<script>
  var workspace = Blockly.inject('blocklyDiv',
      {toolbox: document.getElementById('toolbox')});
       var editor = CodeMirror.fromTextArea(window.document.getElementById('textarea'), {
    lineNumbers: true
  });

    function myUpdateFunction() {
  var code = Blockly.JavaScript.workspaceToCode(workspace);
  window.document.getElementById('textarea').value = code;
}

workspace.addChangeListener(myUpdateFunction);

$("#Run").click(function(){
var CodeBox = [];
eval($("#textarea").val());
});
</script>
</body>
</html>